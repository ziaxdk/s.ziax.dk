<div class="col-md-12">

  <div class="alert alert-danger" ng-if="!MainCtrl.me.isAuth"><strong>Ohh!</strong> Cannot add new when unauthorized, sooo ....</div>

  <form role="form" ng-submit="NewCtrl.submit()" novalidate name="theForm">
    <div class="form-group" ng-class="{'has-error': theForm.q.$invalid }">
      <input type="text" name="q" class="form-control" id="idQ" placeholder="Enter something..." ng-model="NewCtrl.form.q" required>
    </div>

    <hr>

    <div ng-if="NewCtrl.form.type == 'article'">
      <div class="form-group" ng-class="{'has-error': theForm.header.$invalid }">
        <label for="idHeader">Header</label>
        <input type="text" name="header" class="form-control" id="idHeader" ng-model="NewCtrl.form.q" disabled>
      </div>
      <div class="form-group" ng-class="{'has-error': theForm.description.$invalid }">
        <label for="idContent">Content</label>
        <textarea name="description" class="form-control" id="idContent" placeholder="Enter content..." style="min-height: 200px" ng-model="NewCtrl.form.content" required></textarea>
      </div>
      <div class="form-group">
        <label for="idTags">Tags</label>
        <div z-select2="NewCtrl.tags.data.facets.tags.terms" ng-model="NewCtrl.form.tags"></div>
        <!-- <select data-placeholder="Enter tags..." class="form-control" multiple tabindex="1" z-select2 ng-model="NewCtrl.form.tags" ng-options="tag.term as tag.term for tag in NewCtrl.tags.data.facets.tags.terms"> -->
        </select>
      </div>
    </div>

    <div ng-if="NewCtrl.form.type == 'place'">
      <div class="form-group" ng-class="{'has-error': theForm.header.$invalid }">
        <label for="idHeader">Header</label>
        <input type="text" name="header" class="form-control" id="idHeader" ng-model="NewCtrl.form.header" required>
      </div>
      <div class="row" ng-if="NewCtrl.mapSize == 's'">
        <div class="col-md-9">
          <div class="form-group" ng-class="{'has-error': theForm.description.$invalid }">
            <label for="idContent">Content</label>
            <textarea name="description" class="form-control" id="idContent" placeholder="Enter content..." style="min-height: 200px" ng-model="NewCtrl.form.content" required></textarea>
          </div>
          <dash-leaflet-markers icon="NewCtrl.mapIcon">
            <dash-leaflet-marker ng-repeat="i in NewCtrl.mapIcons track by i.type" icon="{{i.name}}"></dash-leaflet-marker>
          </dash-leaflet-markers>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label for="idMaps">Map</label>
            <!-- <div style="border: 1px solid #666; height: 200px" dash-leaflet="NewCtrl.form.q" dash-leaflet-big="NewCtrl.bigMap" dash-leaflet-icon="{{NewCtrl.mapIcon}}"></div> -->
            <div style="border: 1px solid #666; height: 200px" z-map z-map-sizer="NewCtrl.mapSize" z-map-sizer-size="xs" z-map-marker="NewCtrl.form.q" z-map-marker-icon="{{NewCtrl.mapIcon}}"></div>
          </div>
        </div>
      </div>

      <div ng-if="NewCtrl.mapSize == 'm'">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label for="idMaps">Map</label>
              <!-- <div style="border: 1px solid #666; height: 400px" dash-leaflet="NewCtrl.form.q" dash-leaflet-big="NewCtrl.bigMap" dash-leaflet-icon="{{NewCtrl.mapIcon}}"></div> -->
              <div style="border: 1px solid #666; height: 400px" z-map z-map-sizer="NewCtrl.mapSize" z-map-sizer-size="xs" z-map-marker="NewCtrl.form.q" z-map-marker-icon="{{NewCtrl.mapIcon}}"></div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <dash-leaflet-markers icon="NewCtrl.mapIcon">
              <dash-leaflet-marker icon="cutlery"></dash-leaflet-marker>
              <dash-leaflet-marker icon="coffee"></dash-leaflet-marker>
              <dash-leaflet-marker icon="shopping-cart"></dash-leaflet-marker>
              <dash-leaflet-marker icon="eye"></dash-leaflet-marker>
              <dash-leaflet-marker icon="camera"></dash-leaflet-marker>
              <dash-leaflet-marker icon="home"></dash-leaflet-marker>
            </dash-leaflet-markers>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <div class="form-group" ng-class="{'has-error': theForm.description.$invalid }">
              <label for="idContent">Content</label>
              <textarea name="description" class="form-control" id="idContent" placeholder="Enter content..." style="min-height: 200px" ng-model="NewCtrl.form.content" required></textarea>
            </div>
          </div>
        </div>
      </div>

      <div ng-if="NewCtrl.mapSize == 'l'">
        <div z-map z-map-sizer="NewCtrl.mapSize" z-map-sizer-size="xs" z-map-marker="NewCtrl.form.q" z-map-marker-icon="{{NewCtrl.mapIcon}}" style="position: fixed; left: 0; right: 0; top: 50px; bottom: 24px">
        </div>
      </div>


      <div class="form-group">
        <label for="idTags">Tags</label>
        <div z-select2="NewCtrl.tags.data.facets.tags.terms" ng-model="NewCtrl.form.tags"></div>
        <!-- <input type="text" name="tags" class="form-control" id="idTags" placeholder="Enter tags..." ng-model="NewCtrl.form.tags"> -->
      </div>
    </div>

    <div ng-if="NewCtrl.form.type == 'link'">
      <div class="form-group">
        <label for="idUrl">Url</label>
        <input type="text" name="url" class="form-control" id="idUrl" ng-model="NewCtrl.form.q" disabled>
      </div>
      <div class="form-group" ng-class="{'has-error': theForm.header.$invalid }">
        <label for="idHeader">Header</label>
        <input type="text" name="header" class="form-control" id="idHeader" ng-model="NewCtrl.form.header" required>
      </div>
      <div class="form-group" ng-class="{'has-error': theForm.description.$invalid }">
        <label for="idContent">Content</label>
        <textarea name="description" class="form-control" id="idContent" placeholder="Enter content..." style="min-height: 200px" ng-model="NewCtrl.form.content" required></textarea>
      </div>
      <div class="form-group">
        <label for="idTags">Tags</label>
        <div z-select2="NewCtrl.tags.data.facets.tags.terms" ng-model="NewCtrl.form.tags"></div>
        <!-- <input type="text" name="tags" class="form-control" id="idTags" placeholder="Enter tags..." ng-model="NewCtrl.form.tags"> -->
      </div>
    </div>

    <div ng-if="NewCtrl.form.type == 'flight'">

        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <label for="idMaps">Map</label>
              <div style="border: 1px solid #666; height: 400px" z-map z-map-flights="{{NewCtrl.form.flights}}"></div>
            </div>
          </div>
        </div>


    </div>


    <div class="checkbox pull-right">
      <label>
        <input type="checkbox" name="authOnly" ng-model="NewCtrl.form.onlyAuth"> Auth only?
      </label>
    </div>

    <div class="form-group">
      <label for="idType">Type</label>
      <span class="badge">{{NewCtrl.form.type}}</span>
    </div>

    <!-- <pre>{{NewCtrl.form|json}}</pre> -->

    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <!-- <button type="submit" class="btn btn-primary" ng-disabled="theForm.$invalid||!NewCtrl.form.code">Save <span class="glyphicon glyphicon-plus"></span></button> -->
          <button type="submit" class="btn btn-primary" ng-disabled="theForm.$invalid||!MainCtrl.me.isAuth">Save <span class="glyphicon glyphicon-plus"></span></button>
        </div>
      </div>
      <!-- <div class="col-md-1">
        <input type="password" name="code" class="form-control" id="idCode" ng-model="NewCtrl.form.code" required>
      </div> -->
    </div>

    <p>Preview:</p>
    <div class="panel panel-default">
      <div class="panel-body" style="min-height: 200px" ng-bind-html="NewCtrl.form.content|textile"></div>
    </div>
  </form>
</div>
