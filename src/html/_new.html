<div class="col-md-12">

  <div class="alert alert-danger" ng-if="!MainCtrl.me.isAuth"><strong>Ohh!</strong> Cannot add new when unauthorized, sooo ....</div>

  <div ng-if="MainCtrl.me.isAuth">
    <form role="form" ng-submit="submit()" novalidate name="theForm">
      <div class="form-group" ng-class="{'has-error': theForm.q.$invalid }">
        <input type="text" name="q" class="form-control" id="idQ" placeholder="Enter something..." ng-model="form.input" required>
      </div>

      <ul class="list-group facets clearfix">
        <li ng-repeat="type in const.types">
          <button type="button" class="btn btn-sm" ng-class="{'btn-primary': meta.type === type, 'btn-default': meta.type !== type}" ng-click="setContext(type)">{{type}}</button>
        </li>
      </ul>

      <div ng-show="meta.type">

        <div class="newtypeanimate" ng-if="template" ng-include="template"></div>

        <div class="form-group">
          <label for="idTags">Tags</label>
          <input type="text" name="tags" class="form-control" id="idTags" ng-model="form.tags">
          <!-- <div z-select2="NewCtrl.tags.data.facets.tags.terms" ng-model="NewCtrl.form.tags"></div> -->
          </select>
        </div>

        <div class="checkbox pull-right">
          <label>
            <input type="checkbox" name="authOnly" ng-model="form.onlyAuth"> Auth only?
          </label>
        </div>

        <div class="form-group">
          <label for="idType">Type</label>
          <span class="badge">{{meta.type}}</span>
        </div>

        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <!-- <button type="submit" class="btn btn-primary" ng-disabled="theForm.$invalid||!NewCtrl.form.code">Save <span class="glyphicon glyphicon-plus"></span></button> -->
              <button type="submit" class="btn btn-primary" ng-disabled="theForm.$invalid||!MainCtrl.me.isAuth">Save <span class="glyphicon glyphicon-plus"></span></button>
            </div>
          </div>
        </div>

      </form>
      <div ng-show="preview">
        <p>Preview:</p>
        <div class="panel panel-default">
          <div class="panel-body" style="min-height: 200px" ng-bind-html="form.content|textile"></div>
        </div>
      </div>

    </div>

  </div>  

</div>
