# INFO: 2014-01-29T20:49:04Z
# Adding connection to http://localhost:9200/

# DEBUG: 2014-01-29T20:49:06Z
# starting request { method: 'POST',
#   path: '/ziax/link%2Cplace%2Carticle/_count',
#   query: {} }
# 

# TRACE: 2014-01-29T20:49:06Z
curl 'http://localhost:9200/ziax/link%2Cplace%2Carticle/_count?pretty=true' -XPOST
# <- 200
# {
#   "count": 18,
#   "_shards": {
#     "total": 1,
#     "successful": 1,
#     "failed": 0
#   }
# }

# INFO: 2014-01-29T20:49:06Z
# Request complete

# DEBUG: 2014-01-29T20:49:17Z
# starting request { method: 'POST',
#   path: '/ziax/place/_search',
#   body: 
#    { query: { function_score: [Object] },
#      facets: { types: [Object], tags: [Object] },
#      size: 10,
#      from: 0 },
#   query: {} }
# 

# DEBUG: 2014-01-29T20:49:17Z
# starting request { method: 'POST',
#   path: '/ziax/history',
#   body: 
#    { q: '_place:*',
#      q2: '_place:*',
#      createdutc: Wed Jan 29 2014 21:49:17 GMT+0100 (Romance Standard Time) },
#   query: {} }
# 

# TRACE: 2014-01-29T20:49:17Z
curl 'http://localhost:9200/ziax/place/_search?pretty=true' -XPOST -d '{
  "query": {
    "function_score": {
      "query": {
        "match_all": {}
      },
      "functions": [
        {
          "filter": {
            "term": {
              "star": true
            }
          },
          "boost_factor": 1000
        },
        {
          "script_score": {
            "script": "_score * doc[\u0027clicks\u0027].value"
          }
        }
      ]
    }
  },
  "facets": {
    "types": {
      "terms": {
        "field": "_type"
      }
    },
    "tags": {
      "terms": {
        "field": "tags"
      }
    }
  },
  "size": 10,
  "from": 0
}'
# <- 200
# {
#   "took": 2,
#   "timed_out": false,
#   "_shards": {
#     "total": 1,
#     "successful": 1,
#     "failed": 0
#   },
#   "hits": {
#     "total": 5,
#     "max_score": 10,
#     "hits": [
#       {
#         "_index": "ziax",
#         "_type": "place",
#         "_id": "KWM1FTEcTz-kfDj8L1EAoQ",
#         "_score": 10,
#         "_source": {
#           "header": "Pizza",
#           "content": "Great pizzas when skiing",
#           "tags": [
#             "mad",
#             "ferie",
#             "pizza"
#           ],
#           "createdutc": "2013-12-01T10:13:31.106Z",
#           "clicks": 10,
#           "ip": "127.0.0.1",
#           "onlyAuth": false,
#           "location": {
#             "lat": 46.407817,
#             "lon": 11.602809
#           },
#           "icon": "cutlery"
#         }
#       },
#       {
#         "_index": "ziax",
#         "_type": "place",
#         "_id": "dkZnswFcTW-TzOem0HSwjw",
#         "_score": 4,
#         "_source": {
#           "header": "Lake Navaisha Sopa Lodge",
#           "content": "Kenya Safari 2013",
#           "tags": [
#             "hotel",
#             "safari"
#           ],
#           "createdutc": "2013-12-17T10:27:10.861Z",
#           "clicks": 4,
#           "ip": "127.0.0.1",
#           "onlyAuth": false,
#           "location": {
#             "lat": -0.8131,
#             "lon": 36.39239
#           },
#           "icon": "home",
#           "star": false
#         }
#       },
#       {
#         "_index": "ziax",
#         "_type": "place",
#         "_id": "0vX_SohbRSCM0BPd5sZxmg",
#         "_score": 3,
#         "_source": {
#           "header": "Masai Mara Sopa Lodge",
#           "content": "Kenya Safari 2013",
#           "tags": [
#             "hotel",
#             "safari"
#           ],
#           "createdutc": "2013-12-17T10:29:39.957Z",
#           "clicks": 3,
#           "ip": "127.0.0.1",
#           "onlyAuth": false,
#           "location": {
#             "lat": -1.59268,
#             "lon": 35.38975
#           },
#           "icon": "home"
#         }
#       },
#       {
#         "_index": "ziax",
#         "_type": "place",
#         "_id": "qJJ8WhdPS7uRtifhS-iIYw",
#         "_score": 3,
#         "_source": {
#           "header": "Samburu Sopa Lodge",
#           "content": "Kenya Safari 2013",
#           "tags": [
#             "hotel",
#             "safari"
#           ],
#           "createdutc": "2013-12-17T10:22:41.653Z",
#           "clicks": 3,
#           "ip": "127.0.0.1",
#           "onlyAuth": false,
#           "location": {
#             "lat": 0.36528,
#             "lon": 37.31404
#           },
#           "icon": "home"
#         }
#       },
#       {
#         "_index": "ziax",
#         "_type": "place",
#         "_id": "E1-MU1ljSJKk_FkPmfTonw",
#         "_score": 2,
#         "_source": {
#           "header": "Wildebeest Eco Camp",
#           "content": "Wildebeest Eco Camp",
#           "tags": [
#             "hotel"
#           ],
#           "createdutc": "2013-12-26T13:26:28.098Z",
#           "clicks": 2,
#           "ip": "127.0.0.1",
#           "onlyAuth": false,
#           "location": {
#             "lat": -1.3271,
#             "lon": 36.7556
#           },
#           "icon": "home"
#         }
#       }
#     ]
#   },
#   "facets": {
#     "types": {
#       "_type": "terms",
#       "missing": 0,
#       "total": 5,
#       "other": 0,
#       "terms": [
#         {
#           "term": "place",
#           "count": 5
#         }
#       ]
#     },
#     "tags": {
#       "_type": "terms",
#       "missing": 0,
#       "total": 10,
#       "other": 0,
#       "terms": [
#         {
#           "term": "hotel",
#           "count": 4
#         },
#         {
#           "term": "safari",
#           "count": 3
#         },
#         {
#           "term": "pizza",
#           "count": 1
#         },
#         {
#           "term": "mad",
#           "count": 1
#         },
#         {
#           "term": "ferie",
#           "count": 1
#         }
#       ]
#     }
#   }
# }

# INFO: 2014-01-29T20:49:17Z
# Request complete

# TRACE: 2014-01-29T20:49:17Z
curl 'http://localhost:9200/ziax/history?pretty=true' -XPOST -d '{
  "q": "_place:*",
  "q2": "_place:*",
  "createdutc": "2014-01-29T20:49:17.740Z"
}'
# <- 201
# {
#   "ok": true,
#   "_index": "ziax",
#   "_type": "history",
#   "_id": "7-zdrON2TDe7AFPNE9kc4g",
#   "_version": 1
# }

# INFO: 2014-01-29T20:49:17Z
# Request complete

# DEBUG: 2014-01-29T20:49:18Z
# starting request { method: 'POST',
#   path: '/ziax/link%2Cplace%2Carticle/_count',
#   query: {} }
# 

# TRACE: 2014-01-29T20:49:18Z
curl 'http://localhost:9200/ziax/link%2Cplace%2Carticle/_count?pretty=true' -XPOST
# <- 200
# {
#   "count": 18,
#   "_shards": {
#     "total": 1,
#     "successful": 1,
#     "failed": 0
#   }
# }

# INFO: 2014-01-29T20:49:18Z
# Request complete

